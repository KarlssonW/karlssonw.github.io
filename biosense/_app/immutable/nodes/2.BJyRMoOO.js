import{s as it,e as y,O as ee,d as w,f as T,P as te,i as k,v as f,F as jn,k as V,l as g,Q as Fn,n as De,R as Be,t as F,h as W,m as Re,b as I,S as G,j as P,T as j,U as L,V as X,A as de,W as Sn,r as Nn,w as En,p as Wt,X as Tn,Y as $e}from"../chunks/scheduler.CmUQAml-.js";import{S as at,i as ot,b as Et,d as Tt,m as Dt,t as me,a as Ne,c as Gt,e as It,g as zt}from"../chunks/index.UOLQSEWd.js";function re(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Dn(e){const t=n=>{e.contains(n.target)||e.dispatchEvent(new CustomEvent("outclick"))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}const In=[{flashMode:!1,outerRingUsed:!1,wavelength:405,onDuration:200,brightness:100,cooldownDuration:1,adcSteps:64,gain:16,repetitions:10,pauseDuration:200,leds:[!0,!0,!0,!0,!0,!0,!0,!0]}];function Wn(e,t=Rn){return t.map(n=>({...e,wavelength:n.wavelength,leds:n.leds}))}const Pn=[0,1,2,7,4,5,3,6],Bn=[0,1,2,3,5,6,4,7],wt={1:0,4:1,16:2,64:3},Rn=[{wavelength:405,leds:[!0,!1,!1,!1,!0,!1,!1,!1]},{wavelength:465,leds:[!1,!0,!1,!1,!1,!0,!1,!1]},{wavelength:650,leds:[!1,!1,!0,!1,!1,!1,!0,!1]},{wavelength:520,leds:[!1,!1,!1,!0,!1,!1,!1,!0]}];class Gn{constructor(t,n){this.websocket=null,this.message="",this.rgbcCallback=t,this.connectCallback=n}connect(t){t==""&&(t="AUTO"),this.websocket=new WebSocket("ws://localhost:7071"),this.websocket.onopen=()=>{console.log("Connected to WebSocket"),console.log("sent on websocket: PORT;"+t),this.websocket.send("PORT;"+t),this.connectCallback()},this.websocket.onerror=n=>console.log("WebSocket Error: "+n),this.websocket.onmessage=n=>this.messageHander(n.data),this.websocket.onclose=()=>{console.log("WebSocket connection closed"),this.connectCallback()}}messageHander(t){if(console.log("Received from WebSocket: "+t),t.startsWith("RGBC;")){let n=t.split(";"),l=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])];this.rgbcCallback(l)}else t.startsWith("ERROR")&&(console.error(t),this.websocket.close())}async runScan(t){for(let n of t){if(this.getStatus())try{let l=[];l.push("SCAN;");let s=(n.outerRingUsed?Bn:Pn).map(i=>n.leds[i]);if(l.push(s.reduce((i,a)=>i<<1|(a?1:0),0).toString(16).toUpperCase().padStart(2,"0")+";"),l.push(n.flashMode?"1;":"0;"),l.push(n.onDuration.toString()+";"),l.push(n.brightness.toString()+";"),l.push(n.cooldownDuration.toString()+";"),l.push(n.adcSteps.toString()+";"),wt.hasOwnProperty(n.gain))l.push(wt[n.gain].toString()+";");else throw new Error("Gain not set to 1, 4, 16 or 60");l.push("1;"),l.push(n.pauseDuration.toString()+";");for(let i=0;i<n.repetitions;i++)console.log("sent on websocket: "+l.join("")),this.websocket.send(l.join(""))}catch{console.error(error)}else console.log("WebSocket is not connected.");await new Promise(l=>setTimeout(l,(pauseDuration+adcSteps*2.5)*(repetitions-1)))}}getStatus(){return this.websocket&&this.websocket.readyState===WebSocket.OPEN}}const zn=new TextDecoder("utf-8");class Xn{constructor(t,n){this.rgbcCallback=t,this.connectCallback=n,this.device=null,this.service=null,this.server=null,this.scanCharacteristic=null,this.rgbcCharacteristic=null,this.rgbcValueChangedcb=this.rgbcValueChangedcb.bind(this)}async selectDevice(){await navigator.bluetooth.requestDevice({filters:[{name:"BioFilm Control Module"}],optionalServices:["edd12b00-7c3a-49f2-9362-ab2a5f05b10c"]}).then(t=>(this.device=t,t.gatt.connect())).then(t=>(this.server=t,t.getPrimaryService("edd12b00-7c3a-49f2-9362-ab2a5f05b10c"))).then(t=>(this.service=t,t.getCharacteristic("edd12b02-7c3a-49f2-9362-ab2a5f05b10c"))).then(t=>(this.rgbcCharacteristic=t,t.startNotifications())).then(t=>t.addEventListener("characteristicvaluechanged",this.rgbcValueChangedcb)),this.service.getCharacteristic("edd12b01-7c3a-49f2-9362-ab2a5f05b10c").then(t=>{this.scanCharacteristic=t}),this.connectCallback(),console.log("Bluetooth connected")}getStatus(){return this.server!=null&&this.server.connected}rgbcValueChangedcb(t){let n=zn.decode(t.target.value);if(n.startsWith("RGBC;")){let l=n.split(";"),s=[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseInt(l[4])];this.rgbcCallback(s)}}async writeScanCharacteristic(t){console.log(t);for(let n of t){console.log(n);const{flashMode:l,outerRingUsed:s,onDuration:i,brightness:a,cooldownDuration:r,adcSteps:u,gain:o,repetitions:b,pauseDuration:d,leds:m}=n;let v=new Uint8Array(11);v[0]=(s?Bn:Pn).map(h=>m[h]).reduce((h,p)=>h<<1|(p?1:0),0),v[1]=l?1:0,v[2]=i>>8&255,v[3]=i&255,v[4]=a,v[5]=r,v[6]=u,v[7]=wt[o],v[8]=b,v[9]=d>>8&255,v[10]=d&255,this.scanCharacteristic.writeValue(v),console.log("sent single scan instruction"),await new Promise(h=>setTimeout(h,(d+u*3+100)*b))}}disconnect(){this.device!=null&&(this.device.gatt.disconnect(),this.device=null,this.server=null,this.service=null,this.scanCharacteristic=null,this.rgbcCharacteristic=null)}}async function Jn(e){const t=e,n=[];t.forEach(r=>{var Y;const{time:u,program:{flashMode:o,outerRingUsed:b,wavelength:d,onDuration:m,brightness:v,cooldownDuration:h,adcSteps:p,gain:c,pauseDuration:_,leds:M},sample:E,result:x}=r,N=M.filter(z=>z).length,q=E.map(z=>z.type).join(" "),S=E.map(z=>z.count).join(" "),R=(Y=E[0])==null?void 0:Y.isTest;n.push([u,o?1:0,b?1:0,d,m,v,h,p,c,_,N,x[0],x[1],x[2],x[3],q,S,R?1:0].join(";"))});let s=[["time","flashMode","outerRingUsed","wavelength","onDuration","brightness","cooldownDuration","adcSteps","gain","pauseDuration","ledCount","Ry","Gy","By","Cy","samples","counts","isTest"].join(";"),...n].join(`
`),i=new Date,a=i.getFullYear().toString().slice(2)+"_"+(i.getMonth()+1).toString().padStart(2,"0")+(i.getDate().toString().padStart(2,"0")+"_"+i.getHours().toString().padStart(2,"0")+i.getMinutes().toString().padStart(2,"0"));try{const r={suggestedName:a+"_export.csv",types:[{description:"CSV Files",accept:{"text/csv":[".csv"]}}]},o=await(await window.showSaveFilePicker(r)).createWritable({mode:"exclusive"});await o.write(s),await o.close()}catch(r){console.error(r)}}function Ke(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Un(e){let t,n,l;e.length!==2?(t=Ke,n=(r,u)=>Ke(e(r),u),l=(r,u)=>e(r)-u):(t=e===Ke||e===Yn?e:Qn,n=e,l=e);function s(r,u,o=0,b=r.length){if(o<b){if(t(u,u)!==0)return b;do{const d=o+b>>>1;n(r[d],u)<0?o=d+1:b=d}while(o<b)}return o}function i(r,u,o=0,b=r.length){if(o<b){if(t(u,u)!==0)return b;do{const d=o+b>>>1;n(r[d],u)<=0?o=d+1:b=d}while(o<b)}return o}function a(r,u,o=0,b=r.length){const d=s(r,u,o,b-1);return d>o&&l(r[d-1],u)>-l(r[d],u)?d-1:d}return{left:s,center:a,right:i}}function Qn(){return 0}function Zn(e){return e===null?NaN:+e}const Kn=Un(Ke),$n=Kn.right;Un(Zn).center;const el=Math.sqrt(50),tl=Math.sqrt(10),nl=Math.sqrt(2);function et(e,t,n){const l=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(l)),i=l/Math.pow(10,s),a=i>=el?10:i>=tl?5:i>=nl?2:1;let r,u,o;return s<0?(o=Math.pow(10,-s)/a,r=Math.round(e*o),u=Math.round(t*o),r/o<e&&++r,u/o>t&&--u,o=-o):(o=Math.pow(10,s)*a,r=Math.round(e/o),u=Math.round(t/o),r*o<e&&++r,u*o>t&&--u),u<r&&.5<=n&&n<2?et(e,t,n*2):[r,u,o]}function ll(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const l=t<e,[s,i,a]=l?et(t,e,n):et(e,t,n);if(!(i>=s))return[];const r=i-s+1,u=new Array(r);if(l)if(a<0)for(let o=0;o<r;++o)u[o]=(i-o)/-a;else for(let o=0;o<r;++o)u[o]=(i-o)*a;else if(a<0)for(let o=0;o<r;++o)u[o]=(s+o)/-a;else for(let o=0;o<r;++o)u[o]=(s+o)*a;return u}function xt(e,t,n){return t=+t,e=+e,n=+n,et(e,t,n)[2]}function rl(e,t,n){t=+t,e=+e,n=+n;const l=t<e,s=l?xt(t,e,n):xt(e,t,n);return(l?-1:1)*(s<0?1/-s:s)}function sl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ln(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}function Ae(){}var Le=.7,tt=1/Le,Pe="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",he="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",il=/^#([0-9a-f]{3,8})$/,al=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),ol=new RegExp(`^rgb\\(${he},${he},${he}\\)$`),ul=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${Ve}\\)$`),cl=new RegExp(`^rgba\\(${he},${he},${he},${Ve}\\)$`),fl=new RegExp(`^hsl\\(${Ve},${he},${he}\\)$`),hl=new RegExp(`^hsla\\(${Ve},${he},${he},${Ve}\\)$`),Xt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pt(Ae,qe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jt,formatHex:Jt,formatHex8:dl,formatHsl:pl,formatRgb:Yt,toString:Yt});function Jt(){return this.rgb().formatHex()}function dl(){return this.rgb().formatHex8()}function pl(){return Vn(this).formatHsl()}function Yt(){return this.rgb().formatRgb()}function qe(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=il.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qt(t):n===3?new $(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ye(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ye(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=al.exec(e))?new $(t[1],t[2],t[3],1):(t=ol.exec(e))?new $(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ul.exec(e))?Ye(t[1],t[2],t[3],t[4]):(t=cl.exec(e))?Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fl.exec(e))?$t(t[1],t[2]/100,t[3]/100,1):(t=hl.exec(e))?$t(t[1],t[2]/100,t[3]/100,t[4]):Xt.hasOwnProperty(e)?Qt(Xt[e]):e==="transparent"?new $(NaN,NaN,NaN,0):null}function Qt(e){return new $(e>>16&255,e>>8&255,e&255,1)}function Ye(e,t,n,l){return l<=0&&(e=t=n=NaN),new $(e,t,n,l)}function gl(e){return e instanceof Ae||(e=qe(e)),e?(e=e.rgb(),new $(e.r,e.g,e.b,e.opacity)):new $}function Ct(e,t,n,l){return arguments.length===1?gl(e):new $(e,t,n,l??1)}function $(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}Pt($,Ct,Ln(Ae,{brighter(e){return e=e==null?tt:Math.pow(tt,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Le:Math.pow(Le,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $(Te(this.r),Te(this.g),Te(this.b),nt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zt,formatHex:Zt,formatHex8:ml,formatRgb:Kt,toString:Kt}));function Zt(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}`}function ml(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}${Ee((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kt(){const e=nt(this.opacity);return`${e===1?"rgb(":"rgba("}${Te(this.r)}, ${Te(this.g)}, ${Te(this.b)}${e===1?")":`, ${e})`}`}function nt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Te(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ee(e){return e=Te(e),(e<16?"0":"")+e.toString(16)}function $t(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ue(e,t,n,l)}function Vn(e){if(e instanceof ue)return new ue(e.h,e.s,e.l,e.opacity);if(e instanceof Ae||(e=qe(e)),!e)return new ue;if(e instanceof ue)return e;e=e.rgb();var t=e.r/255,n=e.g/255,l=e.b/255,s=Math.min(t,n,l),i=Math.max(t,n,l),a=NaN,r=i-s,u=(i+s)/2;return r?(t===i?a=(n-l)/r+(n<l)*6:n===i?a=(l-t)/r+2:a=(t-n)/r+4,r/=u<.5?i+s:2-i-s,a*=60):r=u>0&&u<1?0:a,new ue(a,r,u,e.opacity)}function bl(e,t,n,l){return arguments.length===1?Vn(e):new ue(e,t,n,l??1)}function ue(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}Pt(ue,bl,Ln(Ae,{brighter(e){return e=e==null?tt:Math.pow(tt,e),new ue(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Le:Math.pow(Le,e),new ue(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,s=2*n-l;return new $(kt(e>=240?e-240:e+120,s,l),kt(e,s,l),kt(e<120?e+240:e-120,s,l),this.opacity)},clamp(){return new ue(en(this.h),Qe(this.s),Qe(this.l),nt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nt(this.opacity);return`${e===1?"hsl(":"hsla("}${en(this.h)}, ${Qe(this.s)*100}%, ${Qe(this.l)*100}%${e===1?")":`, ${e})`}`}}));function en(e){return e=(e||0)%360,e<0?e+360:e}function Qe(e){return Math.max(0,Math.min(1,e||0))}function kt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bt=e=>()=>e;function vl(e,t){return function(n){return e+n*t}}function _l(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(l){return Math.pow(e+l*t,n)}}function kl(e){return(e=+e)==1?qn:function(t,n){return n-t?_l(t,n,e):Bt(isNaN(t)?n:t)}}function qn(e,t){var n=t-e;return n?vl(e,n):Bt(isNaN(e)?t:e)}const tn=function e(t){var n=kl(t);function l(s,i){var a=n((s=Ct(s)).r,(i=Ct(i)).r),r=n(s.g,i.g),u=n(s.b,i.b),o=qn(s.opacity,i.opacity);return function(b){return s.r=a(b),s.g=r(b),s.b=u(b),s.opacity=o(b),s+""}}return l.gamma=e,l}(1);function yl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,l=t.slice(),s;return function(i){for(s=0;s<n;++s)l[s]=e[s]*(1-i)+t[s]*i;return l}}function wl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xl(e,t){var n=t?t.length:0,l=e?Math.min(n,e.length):0,s=new Array(l),i=new Array(n),a;for(a=0;a<l;++a)s[a]=Rt(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(r){for(a=0;a<l;++a)i[a]=s[a](r);return i}}function Cl(e,t){var n=new Date;return e=+e,t=+t,function(l){return n.setTime(e*(1-l)+t*l),n}}function lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ml(e,t){var n={},l={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Rt(e[s],t[s]):l[s]=t[s];return function(i){for(s in n)l[s]=n[s](i);return l}}var Mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yt=new RegExp(Mt.source,"g");function Sl(e){return function(){return e}}function Nl(e){return function(t){return e(t)+""}}function El(e,t){var n=Mt.lastIndex=yt.lastIndex=0,l,s,i,a=-1,r=[],u=[];for(e=e+"",t=t+"";(l=Mt.exec(e))&&(s=yt.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),r[a]?r[a]+=i:r[++a]=i),(l=l[0])===(s=s[0])?r[a]?r[a]+=s:r[++a]=s:(r[++a]=null,u.push({i:a,x:lt(l,s)})),n=yt.lastIndex;return n<t.length&&(i=t.slice(n),r[a]?r[a]+=i:r[++a]=i),r.length<2?u[0]?Nl(u[0].x):Sl(t):(t=u.length,function(o){for(var b=0,d;b<t;++b)r[(d=u[b]).i]=d.x(o);return r.join("")})}function Rt(e,t){var n=typeof t,l;return t==null||n==="boolean"?Bt(t):(n==="number"?lt:n==="string"?(l=qe(t))?(t=l,tn):El:t instanceof qe?tn:t instanceof Date?Cl:wl(t)?yl:Array.isArray(t)?xl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ml:lt)(e,t)}function Tl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Dl(e){return function(){return e}}function Il(e){return+e}var nn=[0,1];function Ie(e){return e}function St(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dl(isNaN(t)?NaN:.5)}function Pl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(l){return Math.max(e,Math.min(t,l))}}function Bl(e,t,n){var l=e[0],s=e[1],i=t[0],a=t[1];return s<l?(l=St(s,l),i=n(a,i)):(l=St(l,s),i=n(i,a)),function(r){return i(l(r))}}function Rl(e,t,n){var l=Math.min(e.length,t.length)-1,s=new Array(l),i=new Array(l),a=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<l;)s[a]=St(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(r){var u=$n(e,r,1,l)-1;return i[u](s[u](r))}}function Ul(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ll(){var e=nn,t=nn,n=Rt,l,s,i,a=Ie,r,u,o;function b(){var m=Math.min(e.length,t.length);return a!==Ie&&(a=Pl(e[0],e[m-1])),r=m>2?Rl:Bl,u=o=null,d}function d(m){return m==null||isNaN(m=+m)?i:(u||(u=r(e.map(l),t,n)))(l(a(m)))}return d.invert=function(m){return a(s((o||(o=r(t,e.map(l),lt)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,Il),b()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),b()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),n=Tl,b()},d.clamp=function(m){return arguments.length?(a=m?!0:Ie,b()):a!==Ie},d.interpolate=function(m){return arguments.length?(n=m,b()):n},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,v){return l=m,s=v,b()}}function Vl(){return Ll()(Ie,Ie)}function ql(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function Ue(e){return e=rt(Math.abs(e)),e?e[1]:NaN}function Al(e,t){return function(n,l){for(var s=n.length,i=[],a=0,r=e[0],u=0;s>0&&r>0&&(u+r+1>l&&(r=Math.max(1,l-u)),i.push(n.substring(s-=r,s+r)),!((u+=r+1)>l));)r=e[a=(a+1)%e.length];return i.reverse().join(t)}}function Ol(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Hl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function st(e){if(!(t=Hl.exec(e)))throw new Error("invalid format: "+e);var t;return new Ut({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}st.prototype=Ut.prototype;function Ut(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ut.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jl(e){e:for(var t=e.length,n=1,l=-1,s;n<t;++n)switch(e[n]){case".":l=s=n;break;case"0":l===0&&(l=n),s=n;break;default:if(!+e[n])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(s+1):e}var An;function Fl(e,t){var n=rt(e,t);if(!n)return e+"";var l=n[0],s=n[1],i=s-(An=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=l.length;return i===a?l:i>a?l+new Array(i-a+1).join("0"):i>0?l.slice(0,i)+"."+l.slice(i):"0."+new Array(1-i).join("0")+rt(e,Math.max(0,t+i-1))[0]}function ln(e,t){var n=rt(e,t);if(!n)return e+"";var l=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+l:l.length>s+1?l.slice(0,s+1)+"."+l.slice(s+1):l+new Array(s-l.length+2).join("0")}const rn={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ql,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ln(e*100,t),r:ln,s:Fl,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sn(e){return e}var an=Array.prototype.map,on=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Wl(e){var t=e.grouping===void 0||e.thousands===void 0?sn:Al(an.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?sn:Ol(an.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",r=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function o(d){d=st(d);var m=d.fill,v=d.align,h=d.sign,p=d.symbol,c=d.zero,_=d.width,M=d.comma,E=d.precision,x=d.trim,N=d.type;N==="n"?(M=!0,N="g"):rn[N]||(E===void 0&&(E=12),x=!0,N="g"),(c||m==="0"&&v==="=")&&(c=!0,m="0",v="=");var q=p==="$"?n:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=p==="$"?l:/[%p]/.test(N)?a:"",R=rn[N],Y=/[defgprs%]/.test(N);E=E===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function z(C){var Q=q,O=S,U,se,be;if(N==="c")O=R(C)+O,C="";else{C=+C;var pe=C<0||1/C<0;if(C=isNaN(C)?u:R(Math.abs(C),E),x&&(C=jl(C)),pe&&+C==0&&h!=="+"&&(pe=!1),Q=(pe?h==="("?h:r:h==="-"||h==="("?"":h)+Q,O=(N==="s"?on[8+An/3]:"")+O+(pe&&h==="("?")":""),Y){for(U=-1,se=C.length;++U<se;)if(be=C.charCodeAt(U),48>be||be>57){O=(be===46?s+C.slice(U+1):C.slice(U))+O,C=C.slice(0,U);break}}}M&&!c&&(C=t(C,1/0));var A=Q.length+C.length+O.length,Z=A<_?new Array(_-A+1).join(m):"";switch(M&&c&&(C=t(Z+C,Z.length?_-O.length:1/0),Z=""),v){case"<":C=Q+C+O+Z;break;case"=":C=Q+Z+C+O;break;case"^":C=Z.slice(0,A=Z.length>>1)+Q+C+O+Z.slice(A);break;default:C=Z+Q+C+O;break}return i(C)}return z.toString=function(){return d+""},z}function b(d,m){var v=o((d=st(d),d.type="f",d)),h=Math.max(-8,Math.min(8,Math.floor(Ue(m)/3)))*3,p=Math.pow(10,-h),c=on[8+h/3];return function(_){return v(p*_)+c}}return{format:o,formatPrefix:b}}var Ze,On,Hn;Gl({thousands:",",grouping:[3],currency:["$",""]});function Gl(e){return Ze=Wl(e),On=Ze.format,Hn=Ze.formatPrefix,Ze}function zl(e){return Math.max(0,-Ue(Math.abs(e)))}function Xl(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ue(t)/3)))*3-Ue(Math.abs(e)))}function Jl(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ue(t)-Ue(e))+1}function Yl(e,t,n,l){var s=rl(e,t,n),i;switch(l=st(l??",f"),l.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(i=Xl(s,a))&&(l.precision=i),Hn(l,a)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(i=Jl(s,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=i-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(i=zl(s))&&(l.precision=i-(l.type==="%")*2);break}}return On(l)}function Ql(e){var t=e.domain;return e.ticks=function(n){var l=t();return ll(l[0],l[l.length-1],n??10)},e.tickFormat=function(n,l){var s=t();return Yl(s[0],s[s.length-1],n??10,l)},e.nice=function(n){n==null&&(n=10);var l=t(),s=0,i=l.length-1,a=l[s],r=l[i],u,o,b=10;for(r<a&&(o=a,a=r,r=o,o=s,s=i,i=o);b-- >0;){if(o=xt(a,r,n),o===u)return l[s]=a,l[i]=r,t(l);if(o>0)a=Math.floor(a/o)*o,r=Math.ceil(r/o)*o;else if(o<0)a=Math.ceil(a*o)/o,r=Math.floor(r*o)/o;else break;u=o}return e},e}function Nt(){var e=Vl();return e.copy=function(){return Ul(e,Nt())},sl.apply(e,arguments),Ql(e)}function un(e,t,n){const l=e.slice();return l[17]=t[n],l}function cn(e,t,n){const l=e.slice();return l[17]=t[n],l}function fn(e){let t,n,l,s=Math.floor(e[17])+"",i,a,r;return{c(){t=ee("g"),n=ee("line"),l=ee("text"),i=F(s),this.h()},l(u){t=te(u,"g",{class:!0,transform:!0});var o=T(t);n=te(o,"line",{x2:!0,class:!0}),T(n).forEach(k),l=te(o,"text",{x:!0,y:!0,class:!0});var b=T(l);i=W(b,s),b.forEach(k),o.forEach(k),this.h()},h(){f(n,"x2",e[0]),f(n,"class","svelte-u38mcn"),f(l,"x","24"),f(l,"y","-6"),f(l,"class","svelte-u38mcn"),f(t,"class",a="tick tick-"+e[17]+" svelte-u38mcn"),f(t,"transform",r="translate(0, "+(e[2](e[17])-e[11].bottom)+")")},m(u,o){V(u,t,o),g(t,n),g(t,l),g(l,i)},p(u,o){o&1&&f(n,"x2",u[0]),o&256&&s!==(s=Math.floor(u[17])+"")&&Re(i,s),o&256&&a!==(a="tick tick-"+u[17]+" svelte-u38mcn")&&f(t,"class",a),o&260&&r!==(r="translate(0, "+(u[2](u[17])-u[11].bottom)+")")&&f(t,"transform",r)},d(u){u&&k(t)}}}function hn(e){let t,n,l,s,i=e[17]+"",a,r;return{c(){t=ee("g"),n=ee("line"),s=ee("text"),a=F(i),this.h()},l(u){t=te(u,"g",{class:!0,transform:!0});var o=T(t);n=te(o,"line",{y1:!0,y2:!0,x1:!0,x2:!0,class:!0}),T(n).forEach(k),s=te(o,"text",{y:!0,class:!0});var b=T(s);a=W(b,i),b.forEach(k),o.forEach(k),this.h()},h(){f(n,"y1",l="-"+e[1]),f(n,"y2","-"+e[11].bottom),f(n,"x1","0"),f(n,"x2","0"),f(n,"class","svelte-u38mcn"),f(s,"y","-2"),f(s,"class","svelte-u38mcn"),f(t,"class","tick tick-"+e[17]+" svelte-u38mcn"),f(t,"transform",r="translate("+e[3](e[17])+","+e[1]+")")},m(u,o){V(u,t,o),g(t,n),g(t,s),g(s,a)},p(u,o){o&2&&l!==(l="-"+u[1])&&f(n,"y1",l),o&10&&r!==(r="translate("+u[3](u[17])+","+u[1]+")")&&f(t,"transform",r)},d(u){u&&k(t)}}}function Zl(e){let t,n,l,s,i,a,r,u,o,b=re(e[8]),d=[];for(let h=0;h<b.length;h+=1)d[h]=fn(cn(e,b,h));let m=re(e[10]),v=[];for(let h=0;h<m.length;h+=1)v[h]=hn(un(e,m,h));return{c(){t=y("div"),n=ee("svg"),l=ee("g");for(let h=0;h<d.length;h+=1)d[h].c();s=ee("g");for(let h=0;h<v.length;h+=1)v[h].c();i=ee("path"),a=ee("path"),r=ee("path"),u=ee("path"),this.h()},l(h){t=w(h,"DIV",{class:!0});var p=T(t);n=te(p,"svg",{class:!0});var c=T(n);l=te(c,"g",{class:!0,transform:!0});var _=T(l);for(let E=0;E<d.length;E+=1)d[E].l(_);_.forEach(k),s=te(c,"g",{class:!0});var M=T(s);for(let E=0;E<v.length;E+=1)v[E].l(M);M.forEach(k),i=te(c,"path",{class:!0,stroke:!0,d:!0}),T(i).forEach(k),a=te(c,"path",{class:!0,stroke:!0,d:!0}),T(a).forEach(k),r=te(c,"path",{class:!0,stroke:!0,d:!0}),T(r).forEach(k),u=te(c,"path",{class:!0,stroke:!0,d:!0}),T(u).forEach(k),c.forEach(k),p.forEach(k),this.h()},h(){f(l,"class","axis y-axis"),f(l,"transform","translate(0, "+e[11].top+")"),f(s,"class","axis x-axis svelte-u38mcn"),f(i,"class","path-line svelte-u38mcn"),f(i,"stroke",e[9][0]),f(i,"d",e[7]),f(a,"class","path-line svelte-u38mcn"),f(a,"stroke",e[9][1]),f(a,"d",e[6]),f(r,"class","path-line svelte-u38mcn"),f(r,"stroke",e[9][2]),f(r,"d",e[5]),f(u,"class","path-line svelte-u38mcn"),f(u,"stroke",e[9][3]),f(u,"d",e[4]),f(n,"class","svelte-u38mcn"),f(t,"class","chart svelte-u38mcn"),jn(()=>e[16].call(t))},m(h,p){V(h,t,p),g(t,n),g(n,l);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(l,null);g(n,s);for(let c=0;c<v.length;c+=1)v[c]&&v[c].m(s,null);g(n,i),g(n,a),g(n,r),g(n,u),o=Fn(t,e[16].bind(t))},p(h,[p]){if(p&2309){b=re(h[8]);let c;for(c=0;c<b.length;c+=1){const _=cn(h,b,c);d[c]?d[c].p(_,p):(d[c]=fn(_),d[c].c(),d[c].m(l,null))}for(;c<d.length;c+=1)d[c].d(1);d.length=b.length}if(p&3082){m=re(h[10]);let c;for(c=0;c<m.length;c+=1){const _=un(h,m,c);v[c]?v[c].p(_,p):(v[c]=hn(_),v[c].c(),v[c].m(s,null))}for(;c<v.length;c+=1)v[c].d(1);v.length=m.length}p&128&&f(i,"d",h[7]),p&64&&f(a,"d",h[6]),p&32&&f(r,"d",h[5]),p&16&&f(u,"d",h[4])},i:De,o:De,d(h){h&&k(t),Be(d,h),Be(v,h),o()}}}function Kl(e,t,n){let l,s,i,a,r,u,o,b,d,m,{points:v=[{x:0,Ry:0,Gy:0,By:0,Cy:0}]}=t,h=["#EA3333","#33EA33","#3333EA","#666666"],p=v.map(x=>x.x);const c={top:20,right:20,bottom:20,left:20};let _=1200,M=600;function E(){_=this.clientWidth,M=this.clientHeight,n(0,_),n(1,M)}return e.$$set=x=>{"points"in x&&n(12,v=x.points)},e.$$.update=()=>{e.$$.dirty&4096&&n(15,l=Math.max(...v.map(x=>Math.max(x.Ry,x.Gy,x.By,x.Cy)))),e.$$.dirty&32768&&n(8,s=[0,l*.25,l*.5,l*.75,l]),e.$$.dirty&4096&&n(14,r=v[0].x),e.$$.dirty&4096&&n(13,u=v[v.length-1].x),e.$$.dirty&24577&&n(3,i=Nt().domain([r,u]).range([c.left,_-c.right])),e.$$.dirty&32770&&n(2,a=Nt().domain([0,l]).range([M-c.bottom,c.top])),e.$$.dirty&4108&&n(7,o=`M${v.map(x=>`${i(x.x)},${a(x.Ry)}`).join("L")}`),e.$$.dirty&4108&&n(6,b=`M${v.map(x=>`${i(x.x)},${a(x.Gy)}`).join("L")}`),e.$$.dirty&4108&&n(5,d=`M${v.map(x=>`${i(x.x)},${a(x.By)}`).join("L")}`),e.$$.dirty&4108&&n(4,m=`M${v.map(x=>`${i(x.x)},${a(x.Cy)}`).join("L")}`)},[_,M,a,i,m,d,b,o,s,h,p,c,v,u,r,l,E]}class $l extends at{constructor(t){super(),ot(this,t,Kl,Zl,it,{points:12})}}function dn(e,t,n){const l=e.slice();return l[24]=t[n],l[25]=t,l[26]=n,l}function pn(e,t,n){const l=e.slice();return l[24]=t[n],l[27]=t,l[28]=n,l}function gn(e,t,n){const l=e.slice();return l[24]=t[n],l[29]=t,l[30]=n,l}function mn(e){let t,n="2-LEDs",l,s,i="4-LEDs",a,r,u="8-LEDs",o,b;return{c(){t=y("button"),t.textContent=n,l=I(),s=y("button"),s.textContent=i,a=I(),r=y("button"),r.textContent=u,this.h()},l(d){t=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-uogqws"&&(t.textContent=n),l=P(d),s=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-1lbpaho"&&(s.textContent=i),a=P(d),r=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-rhauk8"&&(r.textContent=u),this.h()},h(){f(t,"class","svelte-1f80l48"),f(s,"class","svelte-1f80l48"),f(r,"class","svelte-1f80l48")},m(d,m){V(d,t,m),V(d,l,m),V(d,s,m),V(d,a,m),V(d,r,m),o||(b=[L(t,"click",e[7]),L(s,"click",e[8]),L(r,"click",e[9])],o=!0)},p:De,d(d){d&&(k(t),k(l),k(s),k(a),k(r)),o=!1,de(b)}}}function bn(e){let t,n,l,s;function i(){e[11].call(t,e[24])}return{c(){t=y("input"),this.h()},l(a){t=w(a,"INPUT",{class:!0,type:!0,style:!0}),this.h()},h(){f(t,"class","checkbox segment svelte-1f80l48"),f(t,"type","checkbox"),En(t,"--i",e[24]),t.disabled=n=e[2].outerRingUsed},m(a,r){V(a,t,r),t.checked=e[2].leds[e[24]],l||(s=L(t,"change",i),l=!0)},p(a,r){e=a,r&4&&n!==(n=e[2].outerRingUsed)&&(t.disabled=n),r&4&&(t.checked=e[2].leds[e[24]])},d(a){a&&k(t),l=!1,s()}}}function vn(e){let t,n,l,s;function i(){e[12].call(t,e[24])}return{c(){t=y("input"),this.h()},l(a){t=w(a,"INPUT",{class:!0,type:!0,style:!0}),this.h()},h(){f(t,"class","checkbox segment svelte-1f80l48"),f(t,"type","checkbox"),En(t,"--i",e[24]),t.disabled=n=!e[2].outerRingUsed},m(a,r){V(a,t,r),t.checked=e[2].leds[e[24]],l||(s=L(t,"change",i),l=!0)},p(a,r){e=a,r&4&&n!==(n=!e[2].outerRingUsed)&&(t.disabled=n),r&4&&(t.checked=e[2].leds[e[24]])},d(a){a&&k(t),l=!1,s()}}}function er(e){let t,n=re([0,1,2,3]),l=[];for(let s=0;s<4;s+=1)l[s]=_n(dn(e,n,s));return{c(){for(let s=0;s<4;s+=1)l[s].c();t=Wt()},l(s){for(let i=0;i<4;i+=1)l[i].l(s);t=Wt()},m(s,i){for(let a=0;a<4;a+=1)l[a]&&l[a].m(s,i);V(s,t,i)},p(s,i){if(i&6){n=re([0,1,2,3]);let a;for(a=0;a<4;a+=1){const r=dn(s,n,a);l[a]?l[a].p(r,i):(l[a]=_n(r),l[a].c(),l[a].m(t.parentNode,t))}for(;a<4;a+=1)l[a].d(1)}},d(s){s&&k(t),Be(l,s)}}}function tr(e){let t,n,l="Wavelength:<br/>(nm)",s,i,a,r;return{c(){t=y("div"),n=y("p"),n.innerHTML=l,s=I(),i=y("input"),this.h()},l(u){t=w(u,"DIV",{class:!0});var o=T(t);n=w(o,"P",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-gj96qf"&&(n.innerHTML=l),s=P(o),i=w(o,"INPUT",{type:!0,min:!0,class:!0}),o.forEach(k),this.h()},h(){f(n,"class","svelte-1f80l48"),f(i,"type","number"),f(i,"min","1"),f(i,"class","svelte-1f80l48"),f(t,"class","settings-element svelte-1f80l48")},m(u,o){V(u,t,o),g(t,n),g(t,s),g(t,i),j(i,e[2].wavelength),a||(r=L(i,"input",e[13]),a=!0)},p(u,o){o&4&&X(i.value)!==u[2].wavelength&&j(i,u[2].wavelength)},d(u){u&&k(t),a=!1,r()}}}function _n(e){let t,n,l,s,i,a,r,u,o,b,d,m;function v(){e[14].call(o,e[24])}function h(){return e[15](e[24])}return{c(){t=y("div"),n=y("p"),l=F("Wavelength "),s=F(e[24]),i=F(":"),a=y("br"),r=F("(nm)"),u=I(),o=y("input"),b=I(),this.h()},l(p){t=w(p,"DIV",{class:!0});var c=T(t);n=w(c,"P",{class:!0});var _=T(n);l=W(_,"Wavelength "),s=W(_,e[24]),i=W(_,":"),a=w(_,"BR",{}),r=W(_,"(nm)"),_.forEach(k),u=P(c),o=w(c,"INPUT",{type:!0,min:!0,class:!0}),b=P(c),c.forEach(k),this.h()},h(){f(n,"class","svelte-1f80l48"),f(o,"type","number"),f(o,"min","1"),f(o,"class","svelte-1f80l48"),f(t,"class","settings-element svelte-1f80l48")},m(p,c){V(p,t,c),g(t,n),g(n,l),g(n,s),g(n,i),g(n,a),g(n,r),g(t,u),g(t,o),j(o,e[1][e[24]].wavelength),g(t,b),d||(m=[L(o,"input",v),L(o,"focus",h),L(o,"blur",e[16])],d=!0)},p(p,c){e=p,c&2&&X(o.value)!==e[1][e[24]].wavelength&&j(o,e[1][e[24]].wavelength)},d(p){p&&k(t),d=!1,de(m)}}}function nr(e){let t,n,l,s="Toggle Ring",i,a,r,u=e[0]?"Combined":"Single",o,b,d,m,v="Save Program",h,p,c,_,M,E,x,N,q,S,R,Y="Flash Duration:<br/>(ms)",z,C,Q,O,U,se,be="Cooldown Duration:<br/>(ms)",pe,A,Z,ut,ve,we,Lt="ADC Integration Steps:<br/>(n*2.7ms)",ct,ie,ft,_e,xe,Vt="Gain:<br/>1, 4, 16, 64",ht,ae,dt,ke,Ce,qt="Repetitions:",pt,ce,gt,ye,Me,At="Pause Duration:<br/>(ms)",mt,fe,bt,Ot,J=!e[0]&&mn(e),vt=re([0,1,2,3,4,5,6,7]),ne=[];for(let D=0;D<8;D+=1)ne[D]=bn(gn(e,vt,D));let _t=re([0,1,2,3,4,5,6,7]),le=[];for(let D=0;D<8;D+=1)le[D]=vn(pn(e,_t,D));function Ht(D,H){return D[0]?er:tr}let Oe=Ht(e),oe=Oe(e);return{c(){t=y("div"),n=y("div"),l=y("button"),l.textContent=s,i=I(),J&&J.c(),a=I(),r=y("button"),o=F(u),b=F(" Mode"),d=I(),m=y("button"),m.textContent=v,h=I(),p=y("div"),c=y("div"),_=y("div");for(let D=0;D<8;D+=1)ne[D].c();M=I(),E=y("div");for(let D=0;D<8;D+=1)le[D].c();x=I(),N=y("div"),oe.c(),q=I(),S=y("div"),R=y("p"),R.innerHTML=Y,z=I(),C=y("input"),O=I(),U=y("div"),se=y("p"),se.innerHTML=be,pe=I(),A=y("input"),ut=I(),ve=y("div"),we=y("p"),we.innerHTML=Lt,ct=I(),ie=y("input"),ft=I(),_e=y("div"),xe=y("p"),xe.innerHTML=Vt,ht=I(),ae=y("input"),dt=I(),ke=y("div"),Ce=y("p"),Ce.textContent=qt,pt=I(),ce=y("input"),gt=I(),ye=y("div"),Me=y("p"),Me.innerHTML=At,mt=I(),fe=y("input"),this.h()},l(D){t=w(D,"DIV",{id:!0,class:!0});var H=T(t);n=w(H,"DIV",{class:!0});var B=T(n);l=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1ep4awu"&&(l.textContent=s),i=P(B),J&&J.l(B),a=P(B),r=w(B,"BUTTON",{class:!0});var ge=T(r);o=W(ge,u),b=W(ge," Mode"),ge.forEach(k),d=P(B),m=w(B,"BUTTON",{class:!0,"data-svelte-h":!0}),G(m)!=="svelte-1qwm5k0"&&(m.textContent=v),B.forEach(k),h=P(H),p=w(H,"DIV",{class:!0});var He=T(p);c=w(He,"DIV",{class:!0});var je=T(c);_=w(je,"DIV",{class:!0});var jt=T(_);for(let Se=0;Se<8;Se+=1)ne[Se].l(jt);jt.forEach(k),M=P(je),E=w(je,"DIV",{class:!0});var Ft=T(E);for(let Se=0;Se<8;Se+=1)le[Se].l(Ft);Ft.forEach(k),je.forEach(k),x=P(He),N=w(He,"DIV",{class:!0});var K=T(N);oe.l(K),q=P(K),S=w(K,"DIV",{class:!0});var Fe=T(S);R=w(Fe,"P",{class:!0,"data-svelte-h":!0}),G(R)!=="svelte-1os0zud"&&(R.innerHTML=Y),z=P(Fe),C=w(Fe,"INPUT",{type:!0,min:!0,class:!0}),Fe.forEach(k),O=P(K),U=w(K,"DIV",{class:!0});var We=T(U);se=w(We,"P",{class:!0,"data-svelte-h":!0}),G(se)!=="svelte-1xrg0cm"&&(se.innerHTML=be),pe=P(We),A=w(We,"INPUT",{type:!0,min:!0,class:!0}),We.forEach(k),ut=P(K),ve=w(K,"DIV",{class:!0});var Ge=T(ve);we=w(Ge,"P",{class:!0,"data-svelte-h":!0}),G(we)!=="svelte-1x5743"&&(we.innerHTML=Lt),ct=P(Ge),ie=w(Ge,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Ge.forEach(k),ft=P(K),_e=w(K,"DIV",{class:!0});var ze=T(_e);xe=w(ze,"P",{class:!0,"data-svelte-h":!0}),G(xe)!=="svelte-4dnhi9"&&(xe.innerHTML=Vt),ht=P(ze),ae=w(ze,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ze.forEach(k),dt=P(K),ke=w(K,"DIV",{class:!0});var Xe=T(ke);Ce=w(Xe,"P",{class:!0,"data-svelte-h":!0}),G(Ce)!=="svelte-qdljj2"&&(Ce.textContent=qt),pt=P(Xe),ce=w(Xe,"INPUT",{type:!0,min:!0,class:!0}),Xe.forEach(k),gt=P(K),ye=w(K,"DIV",{class:!0});var Je=T(ye);Me=w(Je,"P",{class:!0,"data-svelte-h":!0}),G(Me)!=="svelte-1tx821h"&&(Me.innerHTML=At),mt=P(Je),fe=w(Je,"INPUT",{type:!0,min:!0,class:!0}),Je.forEach(k),K.forEach(k),He.forEach(k),H.forEach(k),this.h()},h(){f(l,"class","svelte-1f80l48"),f(r,"class","svelte-1f80l48"),f(m,"class","svelte-1f80l48"),f(n,"class","buttons-panel svelte-1f80l48"),f(_,"class","inner-ring svelte-1f80l48"),f(E,"class","outer-ring svelte-1f80l48"),f(c,"class","rings svelte-1f80l48"),f(R,"class","svelte-1f80l48"),f(C,"type","number"),f(C,"min","1"),C.disabled=Q=!e[2].flashMode,f(C,"class","svelte-1f80l48"),f(S,"class","settings-element svelte-1f80l48"),f(se,"class","svelte-1f80l48"),f(A,"type","number"),f(A,"min","0"),A.disabled=Z=!e[2].flashMode,f(A,"class","svelte-1f80l48"),f(U,"class","settings-element svelte-1f80l48"),f(we,"class","svelte-1f80l48"),f(ie,"type","number"),f(ie,"min","1"),f(ie,"max","64"),f(ie,"class","svelte-1f80l48"),f(ve,"class","settings-element svelte-1f80l48"),f(xe,"class","svelte-1f80l48"),f(ae,"type","number"),f(ae,"min","1"),f(ae,"max","64"),f(ae,"class","svelte-1f80l48"),f(_e,"class","settings-element svelte-1f80l48"),f(Ce,"class","svelte-1f80l48"),f(ce,"type","number"),f(ce,"min","1"),f(ce,"class","svelte-1f80l48"),f(ke,"class","settings-element svelte-1f80l48"),f(Me,"class","svelte-1f80l48"),f(fe,"type","number"),f(fe,"min","1"),f(fe,"class","svelte-1f80l48"),f(ye,"class","settings-element svelte-1f80l48"),f(N,"class","settings svelte-1f80l48"),f(p,"class","main-panel svelte-1f80l48"),f(t,"id","led-select-panel"),f(t,"class","svelte-1f80l48")},m(D,H){V(D,t,H),g(t,n),g(n,l),g(n,i),J&&J.m(n,null),g(n,a),g(n,r),g(r,o),g(r,b),g(n,d),g(n,m),g(t,h),g(t,p),g(p,c),g(c,_);for(let B=0;B<8;B+=1)ne[B]&&ne[B].m(_,null);g(c,M),g(c,E);for(let B=0;B<8;B+=1)le[B]&&le[B].m(E,null);g(p,x),g(p,N),oe.m(N,null),g(N,q),g(N,S),g(S,R),g(S,z),g(S,C),j(C,e[2].onDuration),g(N,O),g(N,U),g(U,se),g(U,pe),g(U,A),j(A,e[2].cooldownDuration),g(N,ut),g(N,ve),g(ve,we),g(ve,ct),g(ve,ie),j(ie,e[2].adcSteps),g(N,ft),g(N,_e),g(_e,xe),g(_e,ht),g(_e,ae),j(ae,e[2].gain),g(N,dt),g(N,ke),g(ke,Ce),g(ke,pt),g(ke,ce),j(ce,e[2].repetitions),g(N,gt),g(N,ye),g(ye,Me),g(ye,mt),g(ye,fe),j(fe,e[2].pauseDuration),bt||(Ot=[L(l,"click",e[6]),L(r,"click",e[10]),L(m,"click",e[4]),L(C,"input",e[17]),L(A,"input",e[18]),L(ie,"input",e[19]),L(ae,"input",e[20]),L(ce,"input",e[21]),L(fe,"input",e[22])],bt=!0)},p(D,[H]){if(D[0]?J&&(J.d(1),J=null):J?J.p(D,H):(J=mn(D),J.c(),J.m(n,a)),H&1&&u!==(u=D[0]?"Combined":"Single")&&Re(o,u),H&4){vt=re([0,1,2,3,4,5,6,7]);let B;for(B=0;B<8;B+=1){const ge=gn(D,vt,B);ne[B]?ne[B].p(ge,H):(ne[B]=bn(ge),ne[B].c(),ne[B].m(_,null))}for(;B<8;B+=1)ne[B].d(1)}if(H&4){_t=re([0,1,2,3,4,5,6,7]);let B;for(B=0;B<8;B+=1){const ge=pn(D,_t,B);le[B]?le[B].p(ge,H):(le[B]=vn(ge),le[B].c(),le[B].m(E,null))}for(;B<8;B+=1)le[B].d(1)}Oe===(Oe=Ht(D))&&oe?oe.p(D,H):(oe.d(1),oe=Oe(D),oe&&(oe.c(),oe.m(N,q))),H&4&&Q!==(Q=!D[2].flashMode)&&(C.disabled=Q),H&4&&X(C.value)!==D[2].onDuration&&j(C,D[2].onDuration),H&4&&Z!==(Z=!D[2].flashMode)&&(A.disabled=Z),H&4&&X(A.value)!==D[2].cooldownDuration&&j(A,D[2].cooldownDuration),H&4&&X(ie.value)!==D[2].adcSteps&&j(ie,D[2].adcSteps),H&4&&X(ae.value)!==D[2].gain&&j(ae,D[2].gain),H&4&&X(ce.value)!==D[2].repetitions&&j(ce,D[2].repetitions),H&4&&X(fe.value)!==D[2].pauseDuration&&j(fe,D[2].pauseDuration)},i:De,o:De,d(D){D&&k(t),J&&J.d(),Be(ne,D),Be(le,D),oe.d(),bt=!1,de(Ot)}}}function lr(e,t,n){const l=Sn();let{input:s}=t,i=!1,a=Rn;Nn(async()=>{n(0,i=s.length>1),n(2,r=s[0])});let r=In[0];function u(C){n(2,r[C]=!r[C],r)}function o(){if(i){let C=Wn(r,a);console.log(C),l("saveLedProgram",C)}else console.log(r),l("saveLedProgram",[r])}const b=()=>u("outerRingUsed"),d=()=>n(2,r.leds=[!1,!1,!0,!1,!1,!1,!0,!1],r),m=()=>n(2,r.leds=[!0,!1,!0,!1,!0,!1,!0,!1],r),v=()=>n(2,r.leds=Array(8).fill(!0),r),h=()=>n(0,i=!i);function p(C){r.leds[C]=this.checked,n(2,r)}function c(C){r.leds[C]=this.checked,n(2,r)}function _(){r.wavelength=X(this.value),n(2,r)}function M(C){a[C].wavelength=X(this.value),n(1,a)}const E=C=>n(2,r.leds=a[C].leds,r),x=()=>n(2,r.leds=Array(8).fill(!0),r);function N(){r.onDuration=X(this.value),n(2,r)}function q(){r.cooldownDuration=X(this.value),n(2,r)}function S(){r.adcSteps=X(this.value),n(2,r)}function R(){r.gain=X(this.value),n(2,r)}function Y(){r.repetitions=X(this.value),n(2,r)}function z(){r.pauseDuration=X(this.value),n(2,r)}return e.$$set=C=>{"input"in C&&n(5,s=C.input)},[i,a,r,u,o,s,b,d,m,v,h,p,c,_,M,E,x,N,q,S,R,Y,z]}class rr extends at{constructor(t){super(),ot(this,t,lr,nr,it,{input:5})}}function kn(e,t,n){const l=e.slice();return l[11]=t[n],l[12]=t,l[13]=n,l}function yn(e){let t,n,l="Culture Type:",s,i,a,r,u="Count:",o,b,d,m,v="/10",h,p,c="x10",_,M,E="Flag as Test:",x,N,q,S,R;function Y(){e[5].call(i,e[12],e[13])}function z(){e[6].call(b,e[12],e[13])}function C(){return e[7](e[11],e[12],e[13])}function Q(){return e[8](e[11],e[12],e[13])}return{c(){t=y("div"),n=y("p"),n.textContent=l,s=I(),i=y("input"),a=I(),r=y("p"),r.textContent=u,o=I(),b=y("input"),d=I(),m=y("button"),m.textContent=v,h=I(),p=y("button"),p.textContent=c,_=I(),M=y("p"),M.textContent=E,x=I(),N=y("input"),q=I(),this.h()},l(O){t=w(O,"DIV",{class:!0});var U=T(t);n=w(U,"P",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-jji08c"&&(n.textContent=l),s=P(U),i=w(U,"INPUT",{type:!0,class:!0}),a=P(U),r=w(U,"P",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-wjrllh"&&(r.textContent=u),o=P(U),b=w(U,"INPUT",{type:!0,class:!0,min:!0}),d=P(U),m=w(U,"BUTTON",{class:!0,"data-svelte-h":!0}),G(m)!=="svelte-1qxe5i3"&&(m.textContent=v),h=P(U),p=w(U,"BUTTON",{class:!0,"data-svelte-h":!0}),G(p)!=="svelte-nnmfr9"&&(p.textContent=c),_=P(U),M=w(U,"P",{class:!0,"data-svelte-h":!0}),G(M)!=="svelte-nelsvk"&&(M.textContent=E),x=P(U),N=w(U,"INPUT",{type:!0,class:!0}),q=P(U),U.forEach(k),this.h()},h(){f(n,"class","svelte-br7ph0"),f(i,"type","text"),f(i,"class","svelte-br7ph0"),f(r,"class","svelte-br7ph0"),f(b,"type","number"),f(b,"class","long-input svelte-br7ph0"),f(b,"min","1"),f(m,"class","svelte-br7ph0"),f(p,"class","svelte-br7ph0"),f(M,"class","svelte-br7ph0"),f(N,"type","checkbox"),f(N,"class","svelte-br7ph0"),f(t,"class","settings-element svelte-br7ph0")},m(O,U){V(O,t,U),g(t,n),g(t,s),g(t,i),j(i,e[11].type),g(t,a),g(t,r),g(t,o),g(t,b),j(b,e[11].count),g(t,d),g(t,m),g(t,h),g(t,p),g(t,_),g(t,M),g(t,x),g(t,N),N.checked=e[0][0].isTest,g(t,q),S||(R=[L(i,"input",Y),L(b,"input",z),L(m,"click",C),L(p,"click",Q),L(N,"change",e[9])],S=!0)},p(O,U){e=O,U&1&&i.value!==e[11].type&&j(i,e[11].type),U&1&&X(b.value)!==e[11].count&&j(b,e[11].count),U&1&&(N.checked=e[0][0].isTest)},d(O){O&&k(t),S=!1,de(R)}}}function sr(e){let t,n,l,s="Add Culture",i,a,r="Remove Culture",u,o,b="Save Sample Info",d,m,v,h,p,c=re(e[0]),_=[];for(let M=0;M<c.length;M+=1)_[M]=yn(kn(e,c,M));return{c(){t=y("div"),n=y("div"),l=y("button"),l.textContent=s,i=I(),a=y("button"),a.textContent=r,u=I(),o=y("button"),o.textContent=b,d=I(),m=y("div"),v=y("div");for(let M=0;M<_.length;M+=1)_[M].c();this.h()},l(M){t=w(M,"DIV",{id:!0,class:!0});var E=T(t);n=w(E,"DIV",{class:!0});var x=T(n);l=w(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-mboqn4"&&(l.textContent=s),i=P(x),a=w(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-1c9t5li"&&(a.textContent=r),u=P(x),o=w(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-jp47fk"&&(o.textContent=b),x.forEach(k),d=P(E),m=w(E,"DIV",{class:!0});var N=T(m);v=w(N,"DIV",{class:!0});var q=T(v);for(let S=0;S<_.length;S+=1)_[S].l(q);q.forEach(k),N.forEach(k),E.forEach(k),this.h()},h(){f(l,"class","svelte-br7ph0"),f(a,"class","svelte-br7ph0"),f(o,"class","svelte-br7ph0"),f(n,"class","buttons-panel svelte-br7ph0"),f(v,"class","settings svelte-br7ph0"),f(m,"class","main-panel svelte-br7ph0"),f(t,"id","sample-select-panel"),f(t,"class","svelte-br7ph0")},m(M,E){V(M,t,E),g(t,n),g(n,l),g(n,i),g(n,a),g(n,u),g(n,o),g(t,d),g(t,m),g(m,v);for(let x=0;x<_.length;x+=1)_[x]&&_[x].m(v,null);h||(p=[L(l,"click",e[1]),L(a,"click",e[2]),L(o,"click",e[3])],h=!0)},p(M,[E]){if(E&1){c=re(M[0]);let x;for(x=0;x<c.length;x+=1){const N=kn(M,c,x);_[x]?_[x].p(N,E):(_[x]=yn(N),_[x].c(),_[x].m(v,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=c.length}},i:De,o:De,d(M){M&&k(t),Be(_,M),h=!1,de(p)}}}function ir(e,t,n){const l=Sn();let{input:s}=t;Nn(async()=>{n(0,i=s)});let i=[];function a(){n(0,i=[...i,{type:"Culture"+i.length,count:1e8,isTest:!1}])}function r(){i.length>0&&n(0,i=i.slice(0,i.length-1))}function u(){l("saveSampleInfo",{cultures:i})}function o(h,p){h[p].type=this.value,n(0,i)}function b(h,p){h[p].count=X(this.value),n(0,i)}const d=(h,p,c)=>n(0,p[c].count/=10,i),m=(h,p,c)=>n(0,p[c].count*=10,i);function v(){i[0].isTest=this.checked,n(0,i)}return e.$$set=h=>{"input"in h&&n(4,s=h.input)},[i,a,r,u,s,o,b,d,m,v]}class ar extends at{constructor(t){super(),ot(this,t,ir,sr,it,{input:4})}}function or(e){let t,n,l,s,i,a,r,u,o,b,d,m,v=e[11]?"Enabled":"Disabled",h,p,c,_,M,E="Reset Connection",x,N,q=e[11]&&wn(e);return{c(){t=y("button"),n=F("Edit LED Program"),l=I(),s=y("button"),i=F("Enter Sample Info"),a=I(),r=y("button"),u=F("Run Scan"),b=I(),d=y("button"),m=F("Logging "),h=F(v),c=I(),q&&q.c(),_=I(),M=y("button"),M.textContent=E,this.h()},l(S){t=w(S,"BUTTON",{class:!0});var R=T(t);n=W(R,"Edit LED Program"),R.forEach(k),l=P(S),s=w(S,"BUTTON",{class:!0});var Y=T(s);i=W(Y,"Enter Sample Info"),Y.forEach(k),a=P(S),r=w(S,"BUTTON",{class:!0});var z=T(r);u=W(z,"Run Scan"),z.forEach(k),b=P(S),d=w(S,"BUTTON",{class:!0});var C=T(d);m=W(C,"Logging "),h=W(C,v),C.forEach(k),c=P(S),q&&q.l(S),_=P(S),M=w(S,"BUTTON",{class:!0,"data-svelte-h":!0}),G(M)!=="svelte-1brdd0c"&&(M.textContent=E),this.h()},h(){f(t,"class","greenButton svelte-r6i9pq"),t.disabled=e[8],f(s,"class","greenButton svelte-r6i9pq"),s.disabled=e[8],f(r,"class","greenButton svelte-r6i9pq"),r.disabled=o=!(e[6]||e[7])||e[8],f(d,"class",p=$e(e[11]?"greenButton":"redButton")+" svelte-r6i9pq"),f(M,"class","redButton svelte-r6i9pq")},m(S,R){V(S,t,R),g(t,n),V(S,l,R),V(S,s,R),g(s,i),V(S,a,R),V(S,r,R),g(r,u),V(S,b,R),V(S,d,R),g(d,m),g(d,h),V(S,c,R),q&&q.m(S,R),V(S,_,R),V(S,M,R),x||(N=[L(t,"click",e[21]),L(s,"click",e[22]),L(r,"click",e[14]),L(d,"click",e[23]),L(M,"click",e[17])],x=!0)},p(S,R){R&256&&(t.disabled=S[8]),R&256&&(s.disabled=S[8]),R&448&&o!==(o=!(S[6]||S[7])||S[8])&&(r.disabled=o),R&2048&&v!==(v=S[11]?"Enabled":"Disabled")&&Re(h,v),R&2048&&p!==(p=$e(S[11]?"greenButton":"redButton")+" svelte-r6i9pq")&&f(d,"class",p),S[11]?q?q.p(S,R):(q=wn(S),q.c(),q.m(_.parentNode,_)):q&&(q.d(1),q=null)},d(S){S&&(k(t),k(l),k(s),k(a),k(r),k(b),k(d),k(c),k(_),k(M)),q&&q.d(S),x=!1,de(N)}}}function ur(e){let t,n,l,s,i=e[4]==""?"Auto Connect":"Connect",a,r,u,o,b,d,m,v;return{c(){t=y("input"),l=I(),s=y("button"),a=F(i),u=I(),o=y("button"),b=F("Connect Bluetooth"),this.h()},l(h){t=w(h,"INPUT",{class:!0,type:!0,placeholder:!0}),l=P(h),s=w(h,"BUTTON",{class:!0});var p=T(s);a=W(p,i),p.forEach(k),u=P(h),o=w(h,"BUTTON",{class:!0});var c=T(o);b=W(c,"Connect Bluetooth"),c.forEach(k),this.h()},h(){f(t,"class",n=$e(e[6]?"greenInput":"redInput")+" svelte-r6i9pq"),f(t,"type","text"),f(t,"placeholder","SERIAL PORT:"),f(s,"class","greenButton svelte-r6i9pq"),s.disabled=r=e[6]||e[7],f(o,"class","greenButton svelte-r6i9pq"),o.disabled=d=e[7]||e[6]},m(h,p){V(h,t,p),j(t,e[4]),V(h,l,p),V(h,s,p),g(s,a),V(h,u,p),V(h,o,p),g(o,b),m||(v=[L(t,"input",e[18]),L(s,"click",e[19]),L(o,"click",e[20])],m=!0)},p(h,p){p&64&&n!==(n=$e(h[6]?"greenInput":"redInput")+" svelte-r6i9pq")&&f(t,"class",n),p&16&&t.value!==h[4]&&j(t,h[4]),p&16&&i!==(i=h[4]==""?"Auto Connect":"Connect")&&Re(a,i),p&192&&r!==(r=h[6]||h[7])&&(s.disabled=r),p&192&&d!==(d=h[7]||h[6])&&(o.disabled=d)},d(h){h&&(k(t),k(l),k(s),k(u),k(o)),m=!1,de(v)}}}function wn(e){let t,n,l,s=e[3].length+"",i,a,r,u,o,b,d,m,v,h;return{c(){t=y("button"),n=F("Clear Log"),l=y("br"),i=F(s),a=F(" Entries"),r=I(),u=y("button"),o=F("Clear Last"),b=y("br"),d=F(e[5]),m=F(" Entries"),this.h()},l(p){t=w(p,"BUTTON",{class:!0});var c=T(t);n=W(c,"Clear Log"),l=w(c,"BR",{}),i=W(c,s),a=W(c," Entries"),c.forEach(k),r=P(p),u=w(p,"BUTTON",{class:!0});var _=T(u);o=W(_,"Clear Last"),b=w(_,"BR",{}),d=W(_,e[5]),m=W(_," Entries"),_.forEach(k),this.h()},h(){f(t,"class","redButton svelte-r6i9pq"),t.disabled=e[8],f(u,"class","redButton svelte-r6i9pq"),u.disabled=e[8]},m(p,c){V(p,t,c),g(t,n),g(t,l),g(t,i),g(t,a),V(p,r,c),V(p,u,c),g(u,o),g(u,b),g(u,d),g(u,m),v||(h=[L(t,"click",e[24]),L(u,"click",e[25])],v=!0)},p(p,c){c&8&&s!==(s=p[3].length+"")&&Re(i,s),c&256&&(t.disabled=p[8]),c&32&&Re(d,p[5]),c&256&&(u.disabled=p[8])},d(p){p&&(k(t),k(r),k(u)),v=!1,de(h)}}}function xn(e){let t,n,l,s;return{c(){t=y("button"),n=F("Export Log As CSV"),this.h()},l(i){t=w(i,"BUTTON",{class:!0});var a=T(t);n=W(a,"Export Log As CSV"),a.forEach(k),this.h()},h(){f(t,"class","greenButton svelte-r6i9pq"),t.disabled=e[8]},m(i,a){V(i,t,a),g(t,n),l||(s=L(t,"click",e[26]),l=!0)},p(i,a){a&256&&(t.disabled=i[8])},d(i){i&&k(t),l=!1,s()}}}function Cn(e){let t,n,l,s,i,a;return l=new rr({props:{input:e[0]}}),l.$on("saveLedProgram",e[15]),{c(){t=y("div"),n=y("div"),Et(l.$$.fragment),this.h()},l(r){t=w(r,"DIV",{class:!0});var u=T(t);n=w(u,"DIV",{class:!0});var o=T(n);Tt(l.$$.fragment,o),o.forEach(k),u.forEach(k),this.h()},h(){f(n,"class","wrapper svelte-r6i9pq"),f(t,"class","greyBackground svelte-r6i9pq")},m(r,u){V(r,t,u),g(t,n),Dt(l,n,null),s=!0,i||(a=[Tn(Dn.call(null,n)),L(n,"outclick",e[27])],i=!0)},p(r,u){const o={};u&1&&(o.input=r[0]),l.$set(o)},i(r){s||(me(l.$$.fragment,r),s=!0)},o(r){Ne(l.$$.fragment,r),s=!1},d(r){r&&k(t),It(l),i=!1,de(a)}}}function Mn(e){let t,n,l,s,i,a;return l=new ar({props:{input:e[1]}}),l.$on("saveSampleInfo",e[16]),{c(){t=y("div"),n=y("div"),Et(l.$$.fragment),this.h()},l(r){t=w(r,"DIV",{class:!0});var u=T(t);n=w(u,"DIV",{class:!0});var o=T(n);Tt(l.$$.fragment,o),o.forEach(k),u.forEach(k),this.h()},h(){f(n,"class","wrapper svelte-r6i9pq"),f(t,"class","greyBackground svelte-r6i9pq")},m(r,u){V(r,t,u),g(t,n),Dt(l,n,null),s=!0,i||(a=[Tn(Dn.call(null,n)),L(n,"outclick",e[28])],i=!0)},p(r,u){const o={};u&2&&(o.input=r[1]),l.$set(o)},i(r){s||(me(l.$$.fragment,r),s=!0)},o(r){Ne(l.$$.fragment,r),s=!1},d(r){r&&k(t),It(l),i=!1,de(a)}}}function cr(e){let t,n,l,s,i,a,r,u,o;function b(c,_){return c[6]||c[7]?or:ur}let d=b(e),m=d(e),v=e[3].length>0&&xn(e);a=new $l({props:{points:e[2]}});let h=e[9]&&Cn(e),p=e[10]&&Mn(e);return{c(){t=y("div"),n=y("div"),m.c(),l=I(),v&&v.c(),s=I(),i=y("div"),Et(a.$$.fragment),r=I(),h&&h.c(),u=I(),p&&p.c(),this.h()},l(c){t=w(c,"DIV",{id:!0,class:!0});var _=T(t);n=w(_,"DIV",{class:!0});var M=T(n);m.l(M),l=P(M),v&&v.l(M),M.forEach(k),s=P(_),i=w(_,"DIV",{class:!0});var E=T(i);Tt(a.$$.fragment,E),E.forEach(k),r=P(_),h&&h.l(_),u=P(_),p&&p.l(_),_.forEach(k),this.h()},h(){f(n,"class","buttons svelte-r6i9pq"),f(i,"class","wrapper svelte-r6i9pq"),f(t,"id","page"),f(t,"class","svelte-r6i9pq")},m(c,_){V(c,t,_),g(t,n),m.m(n,null),g(n,l),v&&v.m(n,null),g(t,s),g(t,i),Dt(a,i,null),g(t,r),h&&h.m(t,null),g(t,u),p&&p.m(t,null),o=!0},p(c,[_]){d===(d=b(c))&&m?m.p(c,_):(m.d(1),m=d(c),m&&(m.c(),m.m(n,l))),c[3].length>0?v?v.p(c,_):(v=xn(c),v.c(),v.m(n,null)):v&&(v.d(1),v=null);const M={};_&4&&(M.points=c[2]),a.$set(M),c[9]?h?(h.p(c,_),_&512&&me(h,1)):(h=Cn(c),h.c(),me(h,1),h.m(t,u)):h&&(zt(),Ne(h,1,1,()=>{h=null}),Gt()),c[10]?p?(p.p(c,_),_&1024&&me(p,1)):(p=Mn(c),p.c(),me(p,1),p.m(t,null)):p&&(zt(),Ne(p,1,1,()=>{p=null}),Gt())},i(c){o||(me(a.$$.fragment,c),me(h),me(p),o=!0)},o(c){Ne(a.$$.fragment,c),Ne(h),Ne(p),o=!1},d(c){c&&k(t),m.d(),v&&v.d(),It(a),h&&h.d(),p&&p.d()}}}function fr(e,t,n){let l=new Gn(M,()=>n(6,m=l.getStatus())),s=new Xn(M,()=>n(7,v=s.getStatus())),i=In,a=[],r=[{x:-1,Ry:0,Gy:0,By:0,Cy:0}],u=[],o="",b=0,d=0,m=!1,v=!1,h=!1,p=!1,c=!1,_=!1;function M(A){console.log(A),n(5,b++,b),n(2,r=r[0].x>=0?[...r,{x:r[r.length-1].x+1,Ry:A[0],Gy:A[1],By:A[2],Cy:A[3]}]:[{x:0,Ry:A[0],Gy:A[1],By:A[2],Cy:A[3]}]),_&&n(3,u=[...u,{time:Date.now(),program:JSON.parse(JSON.stringify(i[Math.floor((b-1)/i[0].repetitions)])),sample:JSON.parse(JSON.stringify(a)),result:A}]),b>=d&&(n(8,h=!1),console.log(u))}function E(){n(2,r=[{x:-1,Ry:0,Gy:0,By:0,Cy:0}]),n(8,h=!0),n(5,b=0),d=i[0].repetitions*i.length,m?l.runScan(i):v?s.writeScanCharacteristic(i):console.log("No connection")}function x(A){n(0,i=A.detail),n(9,p=!1)}function N(A){n(1,a=A.detail.cultures),console.log(a),n(10,c=!1)}function q(){v&&(s.disconnect(),n(7,v=!1)),n(6,m=!1),n(8,h=!1),n(5,b=0),d=0}function S(){o=this.value,n(4,o)}return[i,a,r,u,o,b,m,v,h,p,c,_,l,s,E,x,N,q,S,()=>l.connect(o),()=>s.selectDevice(),()=>n(9,p=!0),()=>n(10,c=!0),()=>n(11,_=!_),()=>n(3,u=[]),()=>n(3,u=u.slice(0,-b)),()=>Jn(u),()=>n(9,p=!1),()=>n(10,c=!1)]}class pr extends at{constructor(t){super(),ot(this,t,fr,cr,it,{})}}export{pr as component};
